"use strict";(self["webpackChunkexercise4"]=self["webpackChunkexercise4"]||[]).push([[313],{8313:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var o=a(3396),r=a(9242),l=a(7139);const n=(0,o._)("div",{class:"bg-gray-500 text-white py-2 text-lg text-center"},[(0,o._)("h1",null,"Category")],-1),i={key:0,class:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"},s={class:"relative w-[50%] my-6 mx-auto max-w-lg"},d={class:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"},c=(0,o._)("div",{class:"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t"},[(0,o._)("h3",{class:"text-3xl font-semibold"}," Create New Category ")],-1),u={class:"relative justify-center p-6 flex"},p={class:"w-[90%] gap-1 text-left flex flex-col"},g=(0,o._)("label",{for:""},"Name: ",-1),h=(0,o._)("label",{for:""},"Description: ",-1),m=(0,o._)("label",{for:""},"File: ",-1),w={class:"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b"},b={key:1,class:"opacity-25 fixed inset-0 z-40 bg-black"},f={class:"py-2"},x={id:"customers"},_=(0,o._)("tr",{class:"bg-gray-200"},[(0,o._)("th",null,"Name"),(0,o._)("th",null,"Description"),(0,o._)("th",null,"ImageURL")],-1),y={class:"flex justify-center"},v=["src"];function k(e,t,a,k,C,M){return(0,o.wg)(),(0,o.iD)("main",null,[n,(0,o._)("div",null,[C.showModal?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",s,[(0,o._)("div",d,[c,(0,o._)("div",u,[(0,o._)("div",p,[g,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.name=e),class:"w-full p-2 border-2",type:"text",placeholder:"Ex: Phone",required:""},null,512),[[r.nr,C.name]]),h,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>C.description=e),class:"w-full p-2 border-2",type:"text",placeholder:"Ex: Phone",required:""},null,512),[[r.nr,C.description]]),m,(0,o._)("input",{type:"file",onChange:t[2]||(t[2]=e=>M.handleFileUpload(e))},null,32)])]),(0,o._)("div",w,[(0,o._)("button",{class:"text-red-500 bg-transparent border border-solid border-red-500 hover:bg-red-500 hover:text-white active:bg-red-600 font-bold uppercase text-sm px-6 py-3 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",onClick:t[3]||(t[3]=e=>M.toggleModal())}," Close "),(0,o._)("button",{class:"bg-green-500 text-white rounded background-transparent font-bold uppercase px-6 py-3 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",onClick:t[4]||(t[4]=e=>M.create())}," Save Changes ")])])])])):(0,o.kq)("",!0),C.showModal?((0,o.wg)(),(0,o.iD)("div",b)):(0,o.kq)("",!0)]),(0,o._)("div",f,[(0,o._)("button",{onClick:t[5]||(t[5]=e=>M.toggleModal()),class:"bg-blue-500 text-white p-1 px-2 rounded-md"}," Add new ")]),(0,o._)("div",null,[(0,o._)("table",x,[_,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.categories,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,l.zw)(e.name),1),(0,o._)("td",null,(0,l.zw)(e.description),1),(0,o._)("td",y,[(0,o._)("img",{class:"w-[100px] h-fit",src:"/image"+e.image_url,alt:""},null,8,v)])])))),128))])])])}var C=a(4161),M=a(2310),D=a.n(M),j={data(){return{categories:[],name:"",description:"",image_url:"",showModal:!1}},methods:{handleFileUpload(e){this.image_url=e.target.files[0],console.log(this.image_url)},async create(){var e=new FormData;e.append("name",this.name),e.append("description",this.description),e.append("image_url",this.image_url);const t=await C.Z.post("/api/category/create",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});if(t.data.category){this.showModal=!this.showModal;const e=await C.Z.get("/api/category/read?limit=100",{headers:{"Content-Type":"application/json"}});this.categories=await e.data}else t.data.error.image_url?D()({text:t.data.error.image_url[0],backgroundColor:"red",duration:3e3,close:!0}).showToast():t.data.error.name?D()({text:t.data.error.name[0],backgroundColor:"red",duration:3e3,close:!0}).showToast():t.data.error.description&&D()({text:t.data.error.description[0],backgroundColor:"red",duration:3e3,close:!0}).showToast()},toggleModal:function(){this.showModal=!this.showModal}},async mounted(){const e=await C.Z.get("/api/category/read?limit=100",{headers:{"Content-Type":"application/json"}});this.categories=await e.data}},T=a(89);const z=(0,T.Z)(j,[["render",k]]);var U=z}}]);
//# sourceMappingURL=313.7030eae2.js.map