"use strict";(self["webpackChunkexercise4"]=self["webpackChunkexercise4"]||[]).push([[573],{3573:function(e,t,l){l.r(t),l.d(t,{default:function(){return K}});var r=l(3396),c=l(7139),s=l(9242);const o={key:0,class:"relative border-collapse border-[5px] gap-y-4 flex flex-col"},d=(0,r._)("div",{class:"text-left font-bold text-[24px]"},"Product Detail",-1),i={class:"w-[200px] h-[180px] rounded-full border-2 flex justify-center items-center"},n=["src"],u={class:"w-full text-left p-2 flex-col flex justify-between"},a=(0,r._)("span",null,"Description: No description",-1),p={class:"w-full"},f={class:"flex justify-between"},w=(0,r._)("div",null,"Product Prices",-1),h=(0,r._)("tr",{class:"bg-gray-200"},[(0,r._)("th",null,"Prices"),(0,r._)("th",null,"Source"),(0,r._)("th",null,"Action")],-1),x={class:"pl-2"},_=(0,r._)("td",{class:"flex flex-col"},[(0,r._)("button",{class:"text-blue-500"},"Edit"),(0,r._)("button",{class:"text-blue-500"},"Delete")],-1),b={key:0,class:"flex justify-center items-center absolute top-0 left-0 bottom-0 right-0"},g={class:"w-72 h-96 bg-white rounded-lg shadow-md"},y={class:"h-full w-full flex flex-col"},m={class:"w-full flex flex-grow p-2"},v={class:"w-full flex flex-col space-y-3"},P={class:"border"},D={class:"border"},k={class:"flex flex-grow-0 py-1 justify-center space-x-2"},S=(0,r._)("button",{type:"submit",class:"bg-blue-500 p-2 px-3 text-white rounded-md cursor-pointer"}," Add ",-1),j={key:1};function C(e,t,l,C,A,z){return A.products?((0,r.wg)(),(0,r.iD)("main",o,[d,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(A.products,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"flex w-full",key:e._id},[(0,r._)("div",i,[(0,r._)("img",{class:"w-[70px] h-[70px]",src:"http://localhost:3001/"+e.imageUrl,alt:""},null,8,n)]),(0,r._)("div",u,[(0,r._)("span",null,"Title: "+(0,c.zw)(e.title),1),(0,r._)("span",null,"Category: "+(0,c.zw)(e.category["name"]),1),(0,r._)("span",null,"Item: "+(0,c.zw)(e.item["name"]),1),a])])))),128)),(0,r._)("div",p,[(0,r._)("div",f,[w,(0,r._)("button",{class:"hover:text-green-600 hover:font-bold p-2 border-[2px]",onClick:t[0]||(t[0]=e=>z.onSelectProduct())},"Add new price")]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(A.products,(e=>((0,r.wg)(),(0,r.iD)("table",{class:"w-full border-collapse text-left border-[1px]",key:e._id},[h,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.prices,(e=>((0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",x,(0,c.zw)(e.price)+"$",1),(0,r._)("td",null,(0,c.zw)(e.source),1),_])))),256))])))),128))])]),A.priceModalShown&&A.selectedProduct?((0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("div",g,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(...e)=>z.onAddPrice&&z.onAddPrice(...e)),method:"post"},[(0,r._)("div",y,[(0,r._)("div",m,[(0,r._)("div",v,[(0,r._)("div",P,[(0,r.wy)((0,r._)("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=e=>A.price=e),class:"w-full h-10 px-1",type:"number",placeholder:"Price"},null,512),[[s.nr,A.price]])]),(0,r._)("div",D,[(0,r.wy)((0,r._)("input",{required:"","onUpdate:modelValue":t[2]||(t[2]=e=>A.source=e),class:"w-full h-10 px-1",type:"text",placeholder:"Source"},null,512),[[s.nr,A.source]])])])]),(0,r._)("div",k,[(0,r._)("button",{onClick:t[3]||(t[3]=e=>A.priceModalShown=!1),class:"p-2 px-3 text-gray-500 rounded-md cursor-pointer border border-gray-100"}," Cancel "),S])])],32)])])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("main",j," Loading... "))}var A=l(7587),z={async add({price:e,source:t,product:l}){const r=await fetch("http://localhost:3001/price/create",{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify({price:e,source:t,product:l})}),c=await r.json();return c}},M=z,q={data(){return{products:[],selectedProduct:null,priceModalShown:!1,price:"",source:""}},async created(){const e=this.$route.params.id;this.selectedProduct=e,this.products=await A.Z.getById(e)},methods:{onSelectProduct(){this.priceModalShown=!0,console.log(this.selectedProduct)},async onAddPrice(e){e.preventDefault();const{price:t,source:l,selectedProduct:r}=this,c=await M.add({price:t,source:l,product:r});console.log(l),console.log(c),c.error?alert(c.error):(this.products=await A.Z.getById(r),this.price=this.source=this.selectedProduct="")}}},H=l(89);const I=(0,H.Z)(q,[["render",C]]);var K=I}}]);
//# sourceMappingURL=573.a65b9ee9.js.map